(function(g){var f={init:function(a){this.data("jqv")&&null!=this.data("jqv")||(a=f._saveOptions(this,a),g.customOptions=a,g(document).on("click",".formError",function(){g(this).fadeOut(150,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()})}));return this},attach:function(a){a=a?f._saveOptions(this,a):this.data("jqv");a.validateAttribute=this.find("[data-validation-engine*=validate]").length?"data-validation-engine":"class";a.binded&&(this.on(a.validationEventTrigger,"["+a.validateAttribute+
"*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)",f._onFieldEvent),this.on("click","["+a.validateAttribute+"*=validate][type=checkbox],["+a.validateAttribute+"*=validate][type=radio]",f._onFieldEvent),this.on(a.validationEventTrigger,"["+a.validateAttribute+"*=validate][class*=datepicker]",{delay:300},f._onFieldEvent));a.autoPositionUpdate&&g(window).bind("resize",{noAnimation:!0,formElem:this},f.updatePromptsPosition);this.on("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",
f._submitButtonClick);this.removeData("jqv_submitButton");this.on("submit",f._onSubmitEvent);return this},detach:function(){var a=this.data("jqv");this.find("["+a.validateAttribute+"*=validate]").not("[type=checkbox]").off(a.validationEventTrigger,f._onFieldEvent);this.find("["+a.validateAttribute+"*=validate][type=checkbox],[class*=validate][type=radio]").off("click",f._onFieldEvent);this.off("submit",f._onSubmitEvent);this.removeData("jqv");this.off("click","a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']",
f._submitButtonClick);this.removeData("jqv_submitButton");a.autoPositionUpdate&&g(window).off("resize",f.updatePromptsPosition);return this},validate:function(){var a=g(this),b=null;if(a.is("form")||a.hasClass("validationEngineContainer")){if(a.hasClass("validating"))return!1;a.addClass("validating");var d=a.data("jqv"),b=f._validateFields(this);setTimeout(function(){a.removeClass("validating")},100);if(b&&d.onSuccess)d.onSuccess();else if(!b&&d.onFailure)d.onFailure()}else if(a.is("form")||a.hasClass("validationEngineContainer"))a.removeClass("validating");
else{var e=a.closest("form, .validationEngineContainer"),d=e.data("jqv")?e.data("jqv"):g.validationEngine.defaults;if((b=f._validateField(a,d))&&d.onFieldSuccess)d.onFieldSuccess();else if(d.onFieldFailure&&0<d.InvalidFields.length)d.onFieldFailure()}return d.onValidationComplete?!!d.onValidationComplete(e,b):b},updatePromptsPosition:function(a){if(a&&this==window)var b=a.data.formElem,d=a.data.noAnimation;else b=g(this.closest("form, .validationEngineContainer"));var e=b.data("jqv");b.find("["+e.validateAttribute+
"*=validate]").not(":disabled").each(function(){var a=g(this);e.prettySelect&&a.is(":hidden")&&(a=b.find("#"+e.usePrefix+a.attr("id")+e.useSuffix));var h=f._getPrompt(a),n=g(h).find(".formErrorContent").html();h&&f._updatePrompt(a,g(h),n,void 0,!1,e,d)});return this},showPrompt:function(a,b,d,e){var c=this.closest("form, .validationEngineContainer").data("jqv");c||(c=f._saveOptions(this,c));d&&(c.promptPosition=d);c.showArrow=!0==e;f._showPrompt(this,a,b,!1,c);return this},hide:function(){var a=g(this).closest("form, .validationEngineContainer").data("jqv"),
a=a&&a.fadeDuration?a.fadeDuration:0.3,b;b=g(this).is("form")||g(this).hasClass("validationEngineContainer")?"parentForm"+f._getClassName(g(this).attr("id")):f._getClassName(g(this).attr("id"))+"formError";g("."+b).fadeTo(a,0.3,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()});return this},hideAll:function(){var a=this.data("jqv"),a=a?a.fadeDuration:300;g(".formError").fadeTo(a,300,function(){g(this).parent(".formErrorOuter").remove();g(this).remove()});return this},_onFieldEvent:function(a){var b=
g(this),d=b.closest("form, .validationEngineContainer").data("jqv");d.eventTrigger="field";window.setTimeout(function(){f._validateField(b,d);if(0==d.InvalidFields.length&&d.onFieldSuccess)d.onFieldSuccess();else if(0<d.InvalidFields.length&&d.onFieldFailure)d.onFieldFailure()},a.data?a.data.delay:0)},_onSubmitEvent:function(){var a=g(this),b=a.data("jqv");if(a.data("jqv_submitButton")){var d=g("#"+a.data("jqv_submitButton"));if(d&&0<d.length&&(d.hasClass("validate-skip")||"true"==d.attr("data-validation-engine-skip")))return!0}b.eventTrigger=
"submit";return(d=f._validateFields(a))&&b.ajaxFormValidation?(f._validateFormWithAjax(a,b),!1):b.onValidationComplete?!!b.onValidationComplete(a,d):d},_checkAjaxStatus:function(a){var b=!0;g.each(a.ajaxValidCache,function(a,e){if(!e)return b=!1});return b},_checkAjaxFieldStatus:function(a,b){return!0==b.ajaxValidCache[a]},_validateFields:function(a){var b=a.data("jqv"),d=!1;a.trigger("jqv.form.validating");var e=null;a.find("["+b.validateAttribute+"*=validate]").not(":disabled").each(function(){var c=
g(this),h=[];if(0>g.inArray(c.attr("name"),h)){(d|=f._validateField(c,b))&&null==e&&(c.is(":hidden")&&b.prettySelect?e=c=a.find("#"+b.usePrefix+f._jqSelector(c.attr("id"))+b.useSuffix):(c.data("jqv-prompt-at")instanceof jQuery?c=c.data("jqv-prompt-at"):c.data("jqv-prompt-at")&&(c=g(c.data("jqv-prompt-at"))),e=c));if(b.doNotShowAllErrosOnSubmit)return!1;h.push(c.attr("name"));if(!0==b.showOneMessage&&d)return!1}});a.trigger("jqv.form.result",[d]);if(d){if(b.scroll){var c=e.offset().top,h=e.offset().left,
n=b.promptPosition;"string"==typeof n&&-1!=n.indexOf(":")&&(n=n.substring(0,n.indexOf(":")));"bottomRight"!=n&&"bottomLeft"!=n&&(n=f._getPrompt(e))&&(c=n.offset().top);b.scrollOffset&&(c-=b.scrollOffset);if(b.isOverflown){n=g(b.overflownDIV);if(!n.length)return!1;h=n.scrollTop();n=-parseInt(n.offset().top);c+=h+n-5;g(b.overflownDIV+":not(:animated)").animate({scrollTop:c},1100,function(){b.focusFirstField&&e.focus()})}else g("html, body").animate({scrollTop:c},1100,function(){b.focusFirstField&&e.focus()}),
g("html, body").animate({scrollLeft:h},1100)}else b.focusFirstField&&e.focus();return!1}return!0},_validateFormWithAjax:function(a,b){var d=a.serialize(),e=b.ajaxFormValidationMethod?b.ajaxFormValidationMethod:"GET",c=b.ajaxFormValidationURL?b.ajaxFormValidationURL:a.attr("action"),h=b.dataType?b.dataType:"json";g.ajax({type:e,url:c,cache:!1,dataType:h,data:d,form:a,methods:f,options:b,beforeSend:function(){return b.onBeforeAjaxFormValidation(a,b)},error:function(a,b){f._ajaxError(a,b)},success:function(c){if("json"==
h&&!0!==c){for(var d=!1,e=0;e<c.length;e++){var l=c[e],k=g(g("#"+l[0])[0]);if(1==k.length){var r=l[2];!0==l[1]?""!=r&&r?(b.allrules[r]&&(l=b.allrules[r].alertTextOk)&&(r=l),b.showPrompts&&f._showPrompt(k,r,"pass",!1,b,!0)):f._closePrompt(k):(d|=1,b.allrules[r]&&(l=b.allrules[r].alertText)&&(r=l),b.showPrompts&&f._showPrompt(k,r,"",!1,b,!0))}}b.onAjaxFormComplete(!d,a,c,b)}else b.onAjaxFormComplete(!0,a,c,b)}})},_validateField:function(a,b,d){a.attr("id")||(a.attr("id","form-validation-field-"+g.validationEngine.fieldIdCounter),
++g.validationEngine.fieldIdCounter);if(!b.validateNonVisibleFields&&(a.is(":hidden")&&!b.prettySelect||a.parent().is(":hidden")))return!1;var e=a.attr(b.validateAttribute),e=/validate\[(.*)\]/.exec(e);if(!e)return!1;var c=e[1].split(/\[|,|\]/),e=a.attr("name"),h="",n="",m=!1,p=!1;b.isError=!1;b.showArrow=!0;0<b.maxErrorsPerField&&(p=!0);for(var l=g(a.closest("form, .validationEngineContainer")),k=0;k<c.length;k++)c[k]=c[k].replace(" ",""),""===c[k]&&delete c[k];for(var r=k=0;k<c.length;k++){if(p&&
r>=b.maxErrorsPerField){m||(d=g.inArray("required",c),m=-1!=d&&d>=k);break}var q=void 0;switch(c[k]){case "required":m=!0;q=f._getErrorMessage(l,a,c[k],c,k,b,f._required);break;case "custom":q=f._getErrorMessage(l,a,c[k],c,k,b,f._custom);break;case "amount":q=f._getErrorMessage(l,a,c[k],c,k,b,f._amount);break;case "date":q=f._getErrorMessage(l,a,c[k],c,k,b,f._date);break;case "groupRequired":var t="["+b.validateAttribute+"*="+c[k+1]+"]",q=l.find(t).eq(0);q[0]!=a[0]&&(f._validateField(q,b,d),b.showArrow=
!0);(q=f._getErrorMessage(l,a,c[k],c,k,b,f._groupRequired))&&(m=!0);b.showArrow=!1;break;case "ajax":(q=f._ajax(a,c,k,b))&&(n="load");break;case "minSize":q=f._getErrorMessage(l,a,c[k],c,k,b,f._minSize);break;case "maxSize":q=f._getErrorMessage(l,a,c[k],c,k,b,f._maxSize);break;case "min":q=f._getErrorMessage(l,a,c[k],c,k,b,f._min);break;case "max":q=f._getErrorMessage(l,a,c[k],c,k,b,f._max);break;case "past":q=f._getErrorMessage(l,a,c[k],c,k,b,f._past);break;case "future":q=f._getErrorMessage(l,a,
c[k],c,k,b,f._future);break;case "dateRange":t="["+b.validateAttribute+"*="+c[k+1]+"]";b.firstOfGroup=l.find(t).eq(0);b.secondOfGroup=l.find(t).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)q=f._getErrorMessage(l,a,c[k],c,k,b,f._dateRange);q&&(m=!0);b.showArrow=!1;break;case "dateTimeRange":t="["+b.validateAttribute+"*="+c[k+1]+"]";b.firstOfGroup=l.find(t).eq(0);b.secondOfGroup=l.find(t).eq(1);if(b.firstOfGroup[0].value||b.secondOfGroup[0].value)q=f._getErrorMessage(l,a,c[k],c,k,b,f._dateTimeRange);
q&&(m=!0);b.showArrow=!1;break;case "maxCheckbox":a=g(l.find("input[name='"+e+"']"));q=f._getErrorMessage(l,a,c[k],c,k,b,f._maxCheckbox);break;case "minCheckbox":a=g(l.find("input[name='"+e+"']"));q=f._getErrorMessage(l,a,c[k],c,k,b,f._minCheckbox);break;case "equals":q=f._getErrorMessage(l,a,c[k],c,k,b,f._equals);break;case "funcCall":q=f._getErrorMessage(l,a,c[k],c,k,b,f._funcCall);break;case "creditCard":q=f._getErrorMessage(l,a,c[k],c,k,b,f._creditCard);break;case "condRequired":q=f._getErrorMessage(l,
a,c[k],c,k,b,f._condRequired),void 0!==q&&(m=!0)}t=!1;if("object"==typeof q)switch(q.status){case "_break":t=!0;break;case "_error":q=q.message;break;case "_error_no_prompt":return!0}if(t)break;"string"==typeof q&&(h+=q+"<br/>",b.isError=!0,r++)}!m&&(!a.val()&&1>a.val().length)&&(b.isError=!1);d=a.prop("type");k=a.data("promptPosition")||b.promptPosition;("radio"==d||"checkbox"==d)&&1<l.find("input[name='"+e+"']").size()&&(a="inline"===k?g(l.find("input[name='"+e+"'][type!=hidden]:last")):g(l.find("input[name='"+
e+"'][type!=hidden]:first")),b.showArrow=!1);a.is(":hidden")&&b.prettySelect&&(a=l.find("#"+b.usePrefix+f._jqSelector(a.attr("id"))+b.useSuffix));b.isError&&b.showPrompts?f._showPrompt(a,h,n,!1,b):f._closePrompt(a);a.trigger("jqv.field.result",[a,b.isError,h]);e=g.inArray(a[0],b.InvalidFields);-1==e?b.isError&&b.InvalidFields.push(a[0]):b.isError||b.InvalidFields.splice(e,1);f._handleStatusCssClasses(a,b);if(b.isError&&b.onFieldFailure)b.onFieldFailure(a);if(!b.isError&&b.onFieldSuccess)b.onFieldSuccess(a);
return b.isError},_handleStatusCssClasses:function(a,b){b.addSuccessCssClassToField&&a.removeClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&a.removeClass(b.addFailureCssClassToField);b.addSuccessCssClassToField&&!b.isError&&a.addClass(b.addSuccessCssClassToField);b.addFailureCssClassToField&&b.isError&&a.addClass(b.addFailureCssClassToField)},_getErrorMessage:function(a,b,d,e,c,h,n){var m=jQuery.inArray(d,e);if("custom"===d||"funcCall"===d||"amount"===d)d=d+"["+e[m+1]+"]",delete e[m];
var m=d,p=(b.attr("data-validation-engine")?b.attr("data-validation-engine"):b.attr("class")).split(" ");a="future"==d||"past"==d||"maxCheckbox"==d||"minCheckbox"==d?n(a,b,e,c,h):n(b,e,c,h);void 0!=a&&(b=f._getCustomErrorMessage(g(b),p,m,h))&&(a=b);return a},_getCustomErrorMessage:function(a,b,d,e){var c=!1,c=/^custom\[.*\]$/.test(d)?f._validityProp.custom:f._validityProp[d];if(void 0!=c&&(c=a.attr("data-errormessage-"+c),void 0!=c))return c;c=a.attr("data-errormessage");if(void 0!=c)return c;a="#"+
a.attr("id");if("undefined"!=typeof e.custom_error_messages[a]&&"undefined"!=typeof e.custom_error_messages[a][d])c=e.custom_error_messages[a][d].message;else if(0<b.length)for(a=0;a<b.length&&0<b.length;a++){var h="."+b[a];if("undefined"!=typeof e.custom_error_messages[h]&&"undefined"!=typeof e.custom_error_messages[h][d]){c=e.custom_error_messages[h][d].message;break}}c||("undefined"==typeof e.custom_error_messages[d]||"undefined"==typeof e.custom_error_messages[d].message)||(c=e.custom_error_messages[d].message);
return c},_validityProp:{required:"value-missing",custom:"custom-error",groupRequired:"value-missing",ajax:"custom-error",minSize:"range-underflow",maxSize:"range-overflow",min:"range-underflow",max:"range-overflow",past:"type-mismatch",future:"type-mismatch",dateRange:"type-mismatch",dateTimeRange:"type-mismatch",maxCheckbox:"range-overflow",minCheckbox:"range-underflow",equals:"pattern-mismatch",funcCall:"custom-error",creditCard:"pattern-mismatch",condRequired:"value-missing"},_required:function(a,
b,d,e,c){switch(a.prop("type")){default:c=g.trim(a.val());var f=g.trim(a.attr("data-validation-placeholder"));a=g.trim(a.attr("placeholder"));if(!c||f&&c==f||a&&c==a)return e.allrules[b[d]].alertText;break;case "radio":case "checkbox":if(c){if(!a.attr("checked"))return e.allrules[b[d]].alertTextCheckboxMultiple;break}c=a.closest("form, .validationEngineContainer");a=a.attr("name");if(0==c.find("input[name='"+a+"']:checked").size())return 1==c.find("input[name='"+a+"']:visible").size()?e.allrules[b[d]].alertTextCheckboxe:
e.allrules[b[d]].alertTextCheckboxMultiple}},_groupRequired:function(a,b,d,e){var c="["+e.validateAttribute+"*="+b[d+1]+"]",h=!1;a.closest("form, .validationEngineContainer").find(c).each(function(){if(!f._required(g(this),b,d,e))return h=!0,!1});if(!h)return e.allrules[b[d]].alertText},_amount:function(a,b,d,e){var c=e.allrules[b[d+1]];b=a.val();var f=RegExp("[\\s\\.]","g"),n=/[,]/,m,p=0;m=[];var l;d=!1;var k="";e="";if(c){void 0!==c.emptyFormat&&(b=String(b)==c.emptyFormat[0]||String(b)==c.emptyFormat[1]?
c.emptyFormat[2]:b);c.regEx||(c.beforeComma=void 0===c.beforeComma?1:parseInt(c.beforeComma,10),c.afterComma=void 0===c.afterComma?0:parseInt(c.afterComma,10),m=c.minus?"^[+|-]?":"^[+]?",m=m+"\\d{1,"+c.beforeComma+"}",m+=c.afterComma?"([.]\\d{0,"+c.afterComma+"})?$":"$",c.regEx=RegExp(m),c.range=[],void 0===c.amountRange?c.range[0]=function(){return!0}:c.amountRange.forEach(function(a){var b,d;a=a.replace(f,"").replace(n,".");"<"===a.charAt(0)?"="===a.charAt(1)?(b=parseFloat(a.substr(2)),a=function(a){return a<=
b?!0:!1}):(b=parseFloat(a.substr(1)),a=function(a){return a<b?!0:!1}):">"===a.charAt(0)?"="===a.charAt(1)?(b=parseFloat(a.substr(2)),a=function(a){return a>=b?!0:!1}):(b=parseFloat(a.substr(1)),a=function(a){return a>b?!0:!1}):0<=a.indexOf(":")?(a=a.split(":"),b=parseFloat(a[0]),d=parseFloat(a[1]),a=function(a){return a>=b&&a<=d?!0:!1}):(b=parseFloat(a),a=function(a){return a===b?!0:!1});c.range[p++]=a}));b=b.replace(f,"").replace(n,".");if(!c.regEx.test(b))return jQuery.data(a,"resultErrorText",
c.alertText),c.alertText;m=b.split(".",2);b=parseFloat(b);p=0;for(l=c.range.length;l--&&!d;)d=c.range[p++](b);if(!d)return jQuery.data(a,"resultErrorText",c.alertTextRange),c.alertTextRange;if(!m[0])return jQuery.data(a,"resultErrorText",c.alertText),c.alertText;m[0]=m[0]&&(0<=m[0].indexOf("+")||0<=m[0].indexOf("-"))?m[0].substr(1):m[0];k=g.validationEngine.defaults.stringZeros.substr(0,c.beforeComma-m[0].length)+m[0];m[1]=!m[1]&&c.afterComma?g.validationEngine.defaults.stringZeros.substr(0,c.afterComma):
m[1];k+=m[1]?m[1]+g.validationEngine.defaults.stringZeros.substr(0,c.afterComma-m[1].length):"";p=0;for(l=k.length;p<l;)e+="C"+k[p++];e=0>b?e.substring(0,2*(l-1))+"D"+e.substring(2*(l-1)+1):e;jQuery.data(a,"resultString",e)}},_date:function(a,b,d,e){var c=e.allrules[b[d+1]];d=a.val();e=c.dateFormat;var h=e.length;b=c.dateFormatOutput;if(c){for(c.regEx?c.regEx:c.regEx=[];h--;){if(!c.regEx[e[h]]){var n=RegExp("[\\.]","g"),m=RegExp("[/]","g"),n=e[h].replace(/TT/g,"(0[1-9]|[12][0-9]|3[01])").replace(/MM/g,
"(0[1-9]|1[012])").replace(/T/g,"(0[1-9]|[1-9]|[12][0-9]|3[01])").replace(/M/g,"(0[1-9]|1[012]|[1-9])").replace(/JJJJ/g,"([0-9]{4})").replace(/JJ/g,"([0-9]{2})").replace(n,"[\\.]").replace(m,"[\\/]");c.yearFmt=b.substr(b.indexOf("J"),(b.match(/J/g)||[]).length);c.monthFmt=b.substr(b.indexOf("M"),(b.match(/M/g)||[]).length);c.dayFmt=b.substr(b.indexOf("T"),(b.match(/T/g)||[]).length);c.outputFormatYearLength=2<(c.dateFormatOutput.match(/J/g)||[]).length;c.regEx[e[h]]=RegExp("^"+n+"$");c.range=[];if(void 0===
c.dateRange)c.range[0]=function(){return!0};else{var p=g.validationEngine.defaults.currentDate,l=new Date(p.getFullYear(),p.getMonth(),1),k=new Date(p.getFullYear(),p.getMonth()+1,0),r=/^[0-9]{6}$/,q=RegExp("([A-Z]+)([\\+]?)([\\d]+)([A-Z]+)","g"),t=0,w=function(a){var b,c,d;return r.test(a)?6===a.length?a.substr(4,2)+"/01/"+a.substr(0,4):a.substr(4,2)+"/"+a.substr(6,2)+"/"+a.substr(0,4):0<=a.indexOf("+")||0<=a.indexOf("-")?(b=a.replace(q,"$3"),c=a.replace(q,"$1"),d=a.replace(q,"$2"),a=a.replace(q,
"$4"),c=new Date(c.replace("TODAYE",p).replace("TODAYM",l).replace("HEUTE",p).replace("HEUTM",l)),"M"===a?"+"===d?c.setMonth(c.getMonth()+parseInt(b,10)):c.setMonth(c.getMonth()-parseInt(b,10)):"D"===a&&("+"===d?c.setDate(c.getDate()+parseInt(b,10)):c.setDate(c.getDate()-parseInt(b,10))),c):a};c.dateRange.forEach(function(a){var b,d;a=a.replace(RegExp("[\\s\\.]","g"),"");"<"===a.charAt(0)?"="===a.charAt(1)?(b=new Date(a.substr(2).replace(a.substr(2),w(a.substr(2))).replace("TODAYE",p).replace("TODAYM",
k).replace("HEUTE",p).replace("HEUTM",k)),a=function(a){return a<=b?!0:!1}):(b=new Date(a.substr(1).replace(a.substr(1),w(a.substr(1))).replace("TODAYE",p).replace("TODAYM",k).replace("HEUTE",p).replace("HEUTM",k)),a=function(a){return a<b?!0:!1}):">"===a.charAt(0)?"="===a.charAt(1)?(b=new Date(a.substr(2).replace(a.substr(2),w(a.substr(2))).replace("TODAYE",p).replace("TODAYM",l).replace("HEUTE",p).replace("HEUTM",l)),a=function(a){return a>=b?!0:!1}):(b=new Date(a.substr(1).replace(a.substr(1),
w(a.substr(1))).replace("TODAYE",p).replace("TODAYM",l).replace("HEUTE",p).replace("HEUTM",l)),a=function(a){return a>b?!0:!1}):0<=a.indexOf(":")?(a=a.split(":"),b=new Date(a[0].replace(a[0],w(a[0])).replace("TODAYE",p).replace("TODAYM",l).replace("HEUTE",p).replace("HEUTM",l)),d=new Date(a[1].replace(a[1],w(a[1])).replace("TODAYE",p).replace("TODAYM",k).replace("HEUTE",p).replace("HEUTM",k)),0<=(a[1].match(/TODAYM/g)||[]).length||0<=(a[1].match(/HEUTM/g)||[]).length?d.setDate(k.getDate()):d,a=function(a){return a>=
b&&a<=d?!0:!1}):(b=new Date(a.replace("TODAYE",p).replace("TODAYM",k).replace("HEUTE",p).replace("HEUTM",k).replace(a,w(a.substr(1)))),a=function(a){return a===b?!0:!1});c.range[t++]=a})}}if(c.regEx[e[h]].test(d)){var m=e[h],s,v,u,x="",n=!1,y=2===(e[h].match(/J/g)||[]).length;0<=m.indexOf("T")&&0<=m.indexOf("M")?(s=d.replace(c.regEx[e[h]],"$1"),v=d.replace(c.regEx[e[h]],"$2"),u=0<=m.indexOf("J")?d.replace(c.regEx[e[h]],"$3"):""):0>m.indexOf("T")&&(0<=m.indexOf("M")&&0<=m.indexOf("J"))&&(s="",v=d.replace(c.regEx[e[h]],
"$1"),u=d.replace(c.regEx[e[h]],"$2"));s=g.validationEngine.defaults.stringZeros.substr(0,c.dayFmt.length-s.length)+s;v=g.validationEngine.defaults.stringZeros.substr(0,c.monthFmt.length-v.length)+v;x=y?49<parseInt(u,10)?"19"+u:"20"+u:u;c.outputFormatYearLength&&y&&(u=x);b=b.replace(c.dayFmt,s).replace(c.monthFmt,v).replace(c.yearFmt,u);s?s:s="01";x?x:x=g.validationEngine.defaults.currentDate.getFullYear();if(!f._isDate(v+"/"+s+"/"+x))return jQuery.data(a,"resultErrorText",c.alertText+" "+String(c.dateFormat).replace(/,/g,
" or ")),c.alertText+" "+String(c.dateFormat).replace(/,/g," or ");if(void 0!==c.dateRange){s=new Date(v+"/"+s+"/"+u);v=0;for(u=c.range.length;u--&&!n;)n=c.range[v++](s);if(!n)return jQuery.data(a,"resultErrorText",c.alertTextRange),c.alertTextRange}jQuery.data(a,"resultString",b);return}}jQuery.data(a,"resultErrorText",c.alertText+" "+String(c.dateFormat).replace(/,/g," or "));return c.alertText+" "+String(c.dateFormat).replace(/,/g," or ")}},_custom:function(a,b,d,e){var c=b[d+1],f=e.allrules[c];
if(f)if(f.regex)if(b=f.regex,!b)alert("jqv:custom regex not found - "+c);else{if(!RegExp(b).test(a.val()))return e.allrules[c].alertText}else if(f.func)if(f=f.func,"function"!==typeof f)alert("jqv:custom parameter 'function' is no function - "+c);else{if(!f(a,b,d,e))return e.allrules[c].alertText}else alert("jqv:custom type not allowed "+c)},_funcCall:function(a,b,d,e){var c=b[d+1];if(-1<c.indexOf(".")){for(var c=c.split("."),f=window;c.length;)f=f[c.shift()];c=f}else c=window[c]||e.customFunctions[c];
if("function"==typeof c)return c(a,b,d,e)},_equals:function(a,b,d,e){b=b[d+1];if(a.val()!=g("#"+b).val())return e.allrules.equals.alertText},_maxSize:function(a,b,d,e){b=b[d+1];if(a.val().length>b)return a=e.allrules.maxSize,a.alertText+b+a.alertText2},_minSize:function(a,b,d,e){b=b[d+1];if(a.val().length<b)return a=e.allrules.minSize,a.alertText+b+a.alertText2},_min:function(a,b,d,e){b=parseFloat(b[d+1]);if(parseFloat(a.val())<b)return a=e.allrules.min,a.alertText2?a.alertText+b+a.alertText2:a.alertText+
b},_max:function(a,b,d,e){b=parseFloat(b[d+1]);if(parseFloat(a.val())>b)return a=e.allrules.max,a.alertText2?a.alertText+b+a.alertText2:a.alertText+b},_past:function(a,b,d,e,c){d=d[e+1];a=g(a.find("input[name='"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=f._parseDate(a.val())}else a=f._parseDate(d);if(f._parseDate(b.val())>a)return b=c.allrules.past,b.alertText2?b.alertText+f._dateToString(a)+b.alertText2:b.alertText+f._dateToString(a)},
_future:function(a,b,d,e,c){d=d[e+1];a=g(a.find("input[name='"+d.replace(/^#+/,"")+"']"));if("now"==d.toLowerCase())a=new Date;else if(void 0!=a.val()){if(a.is(":disabled"))return;a=f._parseDate(a.val())}else a=f._parseDate(d);if(f._parseDate(b.val())<a)return b=c.allrules.future,b.alertText2?b.alertText+f._dateToString(a)+b.alertText2:b.alertText+f._dateToString(a)},_isDate:function(a){return RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/).test(a)},
_isDateTime:function(a){return RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/).test(a)},_dateCompare:function(a,
b){return new Date(a.toString())<new Date(b.toString())},_dateRange:function(a,b,d,e){if(!e.firstOfGroup[0].value&&e.secondOfGroup[0].value||e.firstOfGroup[0].value&&!e.secondOfGroup[0].value||(!f._isDate(e.firstOfGroup[0].value)||!f._isDate(e.secondOfGroup[0].value))||!f._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value))return e.allrules[b[d]].alertText+e.allrules[b[d]].alertText2},_dateTimeRange:function(a,b,d,e){if(!e.firstOfGroup[0].value&&e.secondOfGroup[0].value||e.firstOfGroup[0].value&&
!e.secondOfGroup[0].value||(!f._isDateTime(e.firstOfGroup[0].value)||!f._isDateTime(e.secondOfGroup[0].value))||!f._dateCompare(e.firstOfGroup[0].value,e.secondOfGroup[0].value))return e.allrules[b[d]].alertText+e.allrules[b[d]].alertText2},_maxCheckbox:function(a,b,d,e,c){d=d[e+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()>d)return c.showArrow=!1,c.allrules.maxCheckbox.alertText2?c.allrules.maxCheckbox.alertText+" "+d+" "+c.allrules.maxCheckbox.alertText2:c.allrules.maxCheckbox.alertText},
_minCheckbox:function(a,b,d,e,c){d=d[e+1];b=b.attr("name");if(a.find("input[name='"+b+"']:checked").size()<d)return c.showArrow=!1,c.allrules.minCheckbox.alertText+" "+d+" "+c.allrules.minCheckbox.alertText2},_creditCard:function(a,b,d,e){d=!1;a=a.val().replace(/ +/g,"").replace(/-+/g,"");var c=a.length;if(14<=c&&16>=c&&0<parseInt(a)){b=0;d=c-1;var c=1,f,g=new String;do f=parseInt(a.charAt(d)),g+=0==c++%2?2*f:f;while(0<=--d);for(d=0;d<g.length;d++)b+=parseInt(g.charAt(d));d=0==b%10}if(!d)return e.allrules.creditCard.alertText},
_ajax:function(a,b,d,e){var c=e.allrules[b[d+1]];d=c.extraData;var h=c.extraDataDynamic;b={fieldId:a.attr("id"),fieldValue:a.val()};if("object"===typeof d)g.extend(b,d);else if("string"===typeof d){var n=d.split("&");for(d=0;d<n.length;d++){var m=n[d].split("=");m[0]&&m[0]&&(b[m[0]]=m[1])}}if(h)for(h=String(h).split(","),d=0;d<h.length;d++)n=h[d],g(n).length&&(m=a.closest("form, .validationEngineContainer").find(n).val(),n.replace("#",""),escape(m),b[n.replace("#","")]=m);"field"==e.eventTrigger&&
delete e.ajaxValidCache[a.attr("id")];if(!e.isError&&!f._checkAjaxFieldStatus(a.attr("id"),e))return g.ajax({type:e.ajaxFormValidationMethod,url:c.url,cache:!1,dataType:"json",data:b,field:a,rule:c,methods:f,options:e,beforeSend:function(){},error:function(a,b){f._ajaxError(a,b)},success:function(b){var d=b[0],k=g("#"+d).eq(0);if(1==k.length){var h=b[2];b[1]?(e.ajaxValidCache[d]=!0,h?e.allrules[h]&&(b=e.allrules[h].alertTextOk)&&(h=b):h=c.alertTextOk,e.showPrompts&&(h?f._showPrompt(k,h,"pass",!0,
e):f._closePrompt(k)),"submit"==e.eventTrigger&&a.closest("form").submit()):(e.ajaxValidCache[d]=!1,e.isError=!0,h?e.allrules[h]&&(b=e.allrules[h].alertText)&&(h=b):h=c.alertText,e.showPrompts&&f._showPrompt(k,h,"",!0,e))}k.trigger("jqv.field.result",[k,e.isError,h])}}),c.alertTextLoad},_ajaxError:function(a,b){0==a.status&&null==b?alert("The page is not served from a server! ajax call failed"):"undefined"!=typeof console&&console.log("Ajax error: "+a.status+" "+b)},_dateToString:function(a){return a.getFullYear()+
"-"+(a.getMonth()+1)+"-"+a.getDate()},_parseDate:function(a){var b=a.split("-");b==a&&(b=a.split("/"));return b==a?(b=a.split("."),new Date(b[2],b[1]-1,b[0])):new Date(b[0],b[1]-1,b[2])},_showPrompt:function(a,b,d,e,c,h){a.data("jqv-prompt-at")instanceof jQuery?a=a.data("jqv-prompt-at"):a.data("jqv-prompt-at")&&(a=g(a.data("jqv-prompt-at")));var n=f._getPrompt(a);h&&(n=!1);g.trim(b)&&(n?f._updatePrompt(a,n,b,d,e,c):f._buildPrompt(a,b,d,e,c))},_buildPrompt:function(a,b,d,e,c){var h=g("<div>");h.addClass(f._getClassName(a.attr("id"))+
"formError");h.addClass("parentForm"+f._getClassName(a.closest("form, .validationEngineContainer").attr("id")));h.addClass("formError");switch(d){case "pass":h.addClass("greenPopup");break;case "load":h.addClass("blackPopup")}e&&h.addClass("ajaxed");g("<div>").addClass("formErrorContent").html(b).appendTo(h);b=a.data("promptPosition")||c.promptPosition;if(c.showArrow)switch(d=g("<div>").addClass("formErrorArrow"),"string"==typeof b&&(e=b.indexOf(":"),-1!=e&&(b=b.substring(0,e))),b){case "bottomLeft":case "bottomRight":h.find(".formErrorContent").before(d);
d.addClass("formErrorArrowBottom").html('<div class="line1">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line10">\x3c!-- --\x3e</div>');break;case "topLeft":case "topRight":d.html('<div class="line10">\x3c!-- --\x3e</div><div class="line9">\x3c!-- --\x3e</div><div class="line8">\x3c!-- --\x3e</div><div class="line7">\x3c!-- --\x3e</div><div class="line6">\x3c!-- --\x3e</div><div class="line5">\x3c!-- --\x3e</div><div class="line4">\x3c!-- --\x3e</div><div class="line3">\x3c!-- --\x3e</div><div class="line2">\x3c!-- --\x3e</div><div class="line1">\x3c!-- --\x3e</div>'),
h.append(d)}c.addPromptClass&&h.addClass(c.addPromptClass);d=a.attr("data-required-class");void 0!==d?h.addClass(d):c.prettySelect&&g("#"+a.attr("id")).next().is("select")&&(d=g("#"+a.attr("id").substr(c.usePrefix.length).substring(c.useSuffix.length)).attr("data-required-class"),void 0!==d&&h.addClass(d));h.css({opacity:0});"inline"===b?(h.addClass("inline"),"undefined"!==typeof a.attr("data-prompt-target")&&0<g("#"+a.attr("data-prompt-target")).length?h.appendTo(g("#"+a.attr("data-prompt-target"))):
a.after(h)):a.before(h);e=f._calculatePosition(a,h,c);h.css({position:"inline"===b?"relative":"absolute",top:e.callerTopPosition,left:e.callerleftPosition,marginTop:e.marginTopSize,opacity:0}).data("callerField",a);c.autoHidePrompt&&setTimeout(function(){h.animate({opacity:0},function(){h.closest(".formErrorOuter").remove();h.remove()})},c.autoHideDelay);return h.animate({opacity:0.87})},_updatePrompt:function(a,b,d,e,c,g,n){b&&("undefined"!==typeof e&&("pass"==e?b.addClass("greenPopup"):b.removeClass("greenPopup"),
"load"==e?b.addClass("blackPopup"):b.removeClass("blackPopup")),c?b.addClass("ajaxed"):b.removeClass("ajaxed"),b.find(".formErrorContent").html(d),a=f._calculatePosition(a,b,g),a={top:a.callerTopPosition,left:a.callerleftPosition,marginTop:a.marginTopSize},n?b.css(a):b.animate(a))},_closePrompt:function(a){var b=f._getPrompt(a);b&&b.fadeTo("fast",0,function(){b.parent(".formErrorOuter").remove();b.remove()})},closePrompt:function(a){return f._closePrompt(a)},_getPrompt:function(a){var b=g(a).closest("form, .validationEngineContainer").attr("id");
a=f._getClassName(a.attr("id"))+"formError";if(b=g("."+f._escapeExpression(a)+".parentForm"+f._getClassName(b))[0])return g(b)},_escapeExpression:function(a){return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g,"\\$1")},isRTL:function(a){var b=g(document),d=g("body");a=a&&a.hasClass("rtl")||a&&"rtl"===(a.attr("dir")||"").toLowerCase()||b.hasClass("rtl")||"rtl"===(b.attr("dir")||"").toLowerCase()||d.hasClass("rtl")||"rtl"===(d.attr("dir")||"").toLowerCase();return Boolean(a)},_calculatePosition:function(a,
b,d){var e,c,f,g=a.width(),m=a.position().left,p=a.position().top;a.height();f=b.height();e=c=0;f=-f;d=a.data("promptPosition")||d.promptPosition;var l="",k="",r=k=0;"string"==typeof d&&-1!=d.indexOf(":")&&(l=d.substring(d.indexOf(":")+1),d=d.substring(0,d.indexOf(":")),-1!=l.indexOf(",")&&(k=l.substring(l.indexOf(",")+1),l=l.substring(0,l.indexOf(",")),r=parseInt(k),isNaN(r)&&(r=0)),k=parseInt(l),isNaN(l));switch(d){default:case "topRight":c+=m+g-30;e+=p;break;case "topLeft":e+=p;c+=m;break;case "centerRight":e=
p+4;f=0;c=m+a.outerWidth(!0)+5;break;case "centerLeft":c=m-(b.width()+2);e=p+4;f=0;break;case "bottomLeft":e=p+a.height()+5;f=0;c=m;break;case "bottomRight":c=m+g-30;e=p+a.height()+5;f=0;break;case "inline":f=e=c=0}return{callerTopPosition:e+r+"px",callerleftPosition:c+k+"px",marginTopSize:f+"px"}},_saveOptions:function(a,b){if(g.validationEngineLanguage)var d=g.validationEngineLanguage.allRules;else g.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page");g.validationEngine.defaults.allrules=
d;d=g.extend(!0,{},g.validationEngine.defaults,b);a.data("jqv",d);return d},_getClassName:function(a){if(a)return a.replace(/:/g,"_").replace(/\./g,"_")},_jqSelector:function(a){return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")},_condRequired:function(a,b,d,e){var c;for(d+=1;d<b.length;d++)if(c=jQuery("#"+b[d]).first(),c.length&&void 0==f._required(c,["required"],0,e,!0))return f._required(a,["required"],0,e)},_submitButtonClick:function(a){a=g(this);a.closest("form, .validationEngineContainer").data("jqv_submitButton",
a.attr("id"))}};g.fn.validationEngine=function(a){var b=g(this);if(!b[0])return b;if("string"==typeof a&&"_"!=a.charAt(0)&&f[a])return"showPrompt"!=a&&("hide"!=a&&"hideAll"!=a)&&f.init.apply(b),f[a].apply(b,Array.prototype.slice.call(arguments,1));if("object"!=typeof a&&a)g.error("Method "+a+" does not exist in jQuery.validationEngine");else return f.init.apply(b,arguments),f.attach.apply(b)};g.methodAmount=f._amount;g.methodDate=f._date;g.validationEngine={fieldIdCounter:0,defaults:{validationEventTrigger:"blur",
scroll:!0,focusFirstField:!0,showPrompts:!0,validateNonVisibleFields:!1,promptPosition:"topRight",bindMethod:"bind",inlineAjax:!1,ajaxFormValidation:!1,ajaxFormValidationURL:!1,ajaxFormValidationMethod:"get",onAjaxFormComplete:g.noop,onBeforeAjaxFormValidation:g.noop,onValidationComplete:!1,doNotShowAllErrosOnSubmit:!1,custom_error_messages:{},binded:!0,showArrow:!0,isError:!1,maxErrorsPerField:!1,ajaxValidCache:{},autoPositionUpdate:!1,InvalidFields:[],onFieldSuccess:!1,onFieldFailure:!1,onSuccess:!1,
onFailure:!1,validateAttribute:"class",addSuccessCssClassToField:"",addFailureCssClassToField:"",autoHidePrompt:!1,autoHideDelay:1E4,fadeDuration:0.3,prettySelect:!1,addPromptClass:"",usePrefix:"",useSuffix:"",showOneMessage:!1,stringZeros:"000000000000000000000000000",currentDate:new Date,allrules:{}}};g(function(){g.validationEngine.defaults.promptPosition=f.isRTL()?"topLeft":"topRight"})})(jQuery);
